# Use case: Construction

TODOs

- [¬†] update use case description (building owner 2 & ragn sells)
- [ ] update diagram to include new actors (building owner 2 & ragn sells)

---

The use case is as follows:

A building owner owns some buildings. Floors in a building are covered with
floor tiles, delivered by a manufacturer (Lindner Group), who uses materials to
construct the tiles. At some time in a building‚Äôs lifetime, the building owner
refurbishes a building and wants to decide on what to do with the floor tiles,
based on economic and environmental costs.

From Lindner Group's perspective, all product data and quality metrics are known. On
the other hand, Lindner does not have information on dismantled raised floor
elements: where to find them, how many can be found, when we these elements be
available? Therefore, procuring secondary raw materials in a secure way is hard
due to lack of data on those materials. Access to more data, and at increased
granularity, would increase the usage of those materials.

Information on product level are not registered throughout the lifecycle of the
product which makes it hard to securely assess the quality and secure the
correct handling of the product, either for reuse or to transform it into
secondary raw materials.

![Construction use case](img/construction-use-case.png)

## Implementation

We map the source data to Linked Data using the [YARRRML parser][yarrrml-parser]
and the [RMLMapper][rmlmapper].
As a result, every actor's source data will be transformed to RDF, serialized as Turtle.

Every actors has their a pod, hosted by their own [Community Solid server][css].
Each pod contains the Turtle files of the actor owning the pod.</br>
To operate on the Solid pods (e.g. specifying access control),
we use of [Bashlib][bashlib]: a Command-Line Interface to interact with actors in a Solid.</br>
To query the distributed data, we use the [Comunica Webclient][comunica-webclient]:
a jQuery widget to query heterogeneous interfaces using Comunica SPARQL.

## Features

### Flexible support for heterogeneous systems

There are 4 actors,
each storing their data using a different data model and different serialization:

- Building Owner (User)
  - Buildings (CSV)
- Building Owner 2 (User)
  - Buildings (JSON)
- Lindner Group (Manufacturer)
  - Bill of Materials (CSV)
  - Materials (CSV)
  - Products (CSV)
- Ragn-Sells (Sorter, Recycler)
  - Services (XML)

### Access Control

Generally, the following ACL rules are applied

- a Manufacturer can *READ* User/Customer data
- a User can *READ* the *Products* of a *Manufacturer*
- every authenticated actor can *READ* the available services of a Recycler or Sorter
- the platform Administrator can *READ* all data generated by the actors

Applied to the construction example use case, this comes down to

- ‚ÄúLindner Group‚Äù can *READ* buildings data from ‚ÄúBuilding Owner‚Äù & ‚ÄúBuilding Owner 2‚Äù
- ‚ÄúBuilding Owner‚Äù & ‚ÄúBuilding Owner 2‚Äù can *READ* product data from ‚ÄúLindner Group‚Äù
- All actors can *READ* service descriptions from Ragn-Sells
- The ‚Äúadmin‚Äù actor can *READ* every actor‚Äôs generated data (i.e. data within `<actor>/data/dt/out`)

## Demo

> üìΩÔ∏è [Demo][screencast-d4_2]
 
When an actor is not yet authenticated,
only access to publicly shared data can be read.
For example, the actors within the Solid network.
[üìΩÔ∏è [Not authenticated] Query actors within the Solid network](https://youtube.com/clip/UgkxKL2O-5JJ3dZ1f01BJPbMRP1egqnx5Sjb)

A Manufacturer can *READ* User/Customer data.</br>
When authenticating as a Manufacturer,
like Lindner Group,
one can query the where its tiles are located.

- [Authenticating as Lindner Group](https://youtube.com/clip/UgkxsSfr3KDmiqoZUs5xoSrSxWW6IZotsKIw)
- [[Authenticated as Lindner Group] Query: What are the tiles of Building B0?](https://youtube.com/clip/UgkxC3Mawc5yP-2ZTL8gwjs2uhVueoC6kvKR)
- [[Authenticated as Lindner Group] Query: What are the tiles of the building at a specific address?](https://youtube.com/clip/Ugkx4wWg-6mgz45aUczUXiFEeOyNmP43OXHP)
- [[Authenticated as Lindner Group] Query 1: What are Linder Group's Products? Query 2: What are the product details?](https://youtube.com/clip/UgkxtDBtWkJkZbwGElBf0hrZiOcF1drFmxQa)

A User can *READ* the *Products* of a *Manufacturer*.</br>
From the perspective of a Building Owner, only product data is readable.
However, it is not possible for a *User* to read *Product Details*.</br>
More specifically, the *Building Owner* is not able to query the product details.

- [Authenticating as Building Owner](https://youtube.com/clip/UgkxndBmpEvsJerW3oTNNQSWKLnlcuQZjZRK)
- [[Authenticated as Building Owner] Query Lindner Group's products](https://youtube.com/clip/UgkxEfq0IwN144XwS-KZ1B9gkdCAKUQk4_ZS)
- [[Authenticated as Building Owner] Query Lindner Group's product details: Not Authorized!](https://youtube.com/clip/UgkxlDoAHFJQVidm9s1WWCyHUho1P8_Q7iXH)

The *Admin* actor can *READ* every actor‚Äôs generated data.

- [[Authenticated as Admin] Count & Query all triples!](https://youtube.com/clip/UgkxXGvlJCiqNT1zaLBESrmgRErY0puAlrw7)

<!-- Refs -->
[comunica-webclient]: https://github.com/comunica/jQuery-Widget.js
[css]: https://github.com/CommunitySolidServer/CommunitySolidServer
[bashlib]: https://github.com/SolidLabResearch/Bashlib
[rmlmapper]: https://github.com/RMLio/rmlmapper-java
[yarrrml-parser]: https://github.com/RMLio/yarrrml-parser/tree/development/lib
[screencast-d4_2]: https://youtu.be/WkQUwIwi_1M